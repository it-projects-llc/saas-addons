<?xml version="1.0" encoding="utf-8"?>
<!--Copyright 2020 Vildan Safin <https://www.it-projects.info/team/Enigma228322>
    License AGPL-3.0 (https://www.gnu.org/licenses/agpl-3.0.html).-->
<odoo>
    <template id="manage">
        <t t-call="website.layout">
            <title>Apps</title>
            <div class="row container" style="margin-left: 25%">
                <div class="col-sm-8">
                    <!-- App list -->
                    <div class="col-12 col-md-8 col-lg-9">
                        <h3 class="mt16 mb16">Choose your Apps</h3>
                        <h6 class="mt16 mb16">Choosen apps will be available in the store</h6>
                        <div class="openerp_enterprise_pricing_step_body mb24">
                            <div class="form-row">
                                <t t-foreach="apps" t-as="app">
                                    <p id="application" class="col-12 col-sm-6 col-lg-4 shadow p-3 bg-white rounded price-window"><t t-esc="app.module_name"/></p>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <record id="view_manage_apps_search" model="ir.ui.view">
        <field name="name">saas.line.search</field>
        <field name="model">saas.line</field>
        <field name="arch" type="xml">
            <search string="Search Redirect">
                <field name="module_name"/>
                <field name="allow_to_sell" on_change="on_change_price(allow_to_sell)"/>
            </search>
        </field>
    </record>

    <record id="website_manage_apps_tree_view" model="ir.ui.view">
        <field name="name">saas.line.list</field>
        <field name="model">saas.line</field>
        <field name="arch" type="xml">
            <tree string="Manage Apps">
                <field name="module_name"/>
                <field name="allow_to_sell"/>
            </tree>
        </field>
    </record>

    <record id="action_website_manage_apps_list" model="ir.actions.act_window">
        <field name="name">Website Apps</field>
        <field name="res_model">saas.line</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="website_manage_apps_tree_view"/>
        <field name="target">current</field>
        <field name="search_view_id" ref="view_manage_apps_search"/>
    </record>
    
    <menuitem name="Manage Apps"
            id="menu_website_manage_apps_list"
            action="action_website_manage_apps_list"
            parent="website.menu_website_global_configuration"
            sequence="40"
            />

    <record id="saas_module_form_view" model="ir.ui.view">
        <field name="name">saas.module.form.view</field>
        <field name="model">saas.module</field>
        <field name="inherit_id" ref="saas.saas_module_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/group" position="inside">
                <field name="month_price"/>
                <field name="year_price"/>
            </xpath>
        </field>
    </record>

    <record id="saas_template_form_view" model="ir.ui.view">
        <field name="name">saas.template.form.view</field>
        <field name="model">saas.template</field>
        <field name="inherit_id" ref="saas.saas_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/group" position="inside">
                <field name="set_as_base"/>
            </xpath>
        </field>
    </record>
</odoo>
